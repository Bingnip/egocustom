import{e as N,u as xe,S as le,I as ue,J as we,_ as R,n as P,l as pe,h as j,K as Te,i as se,L as tt,y as Ue,M as ee,N as ot,O as Se,P as z,Q as Ae,R as lt,w as qe,g as nt,f as Re,T as ke,r as We,U as Fe,V as at,W as Oe,X as st,Y as rt}from"./index-RQ4lM9ZM.js";import{e as A,a9 as K,m as _,o as i,h as S,w as e,W as I,j as ne,U as T,O as x,$ as E,v as _e,Y as ae,Z as U,P as s,l as o,k as p,I as ut,N as te,r as W,f as ce,z as X,ac as ie,n as G,B as ze,_ as H,ad as He,ae as Be,af as ct,a0 as Ke,p as Le,a7 as re,V,a1 as je,a2 as Xe,C as Ye,X as it,ag as dt,ah as mt,ai as ft,aj as Me,ak as Je,ab as pt,al as _t,i as De}from"./vue-BCHllEKp.js";import{_ as vt,D as gt}from"./darkSwitch-6hRXhGUW.js";import{c as yt,o as Ee,g as Ve,r as fe,s as bt,a as ht}from"./router-DpNqRGTh.js";import{I as Ct}from"./index-DVPej9LR.js";import{t as kt}from"./useDark-DodpfM_k.js";import{a as wt,i as xt}from"./index-DRj2VtT4.js";import{F as de}from"./index-DLwMuYHJ.js";import"./index-BzevwW1R.js";const Tt={class:"layout-logo"},St={key:0,class:"logo-img",src:vt,alt:"logo"},Bt=A({__name:"logo",setup(b){K(d=>({adf9ae48:e(t).layout.layoutMode!="Streamline"?e(t).getColorVal("menuTopBarBackground"):"transparent"}));const t=N(),l=xe(),u=function(){t.layout.shrink&&!t.layout.menuCollapse&&yt(),t.setLayout("menuCollapse",!t.layout.menuCollapse),le.set(ue,{layoutMode:t.layout.layoutMode,menuCollapse:t.layout.menuCollapse}),setTimeout(()=>{we()},350)};return(d,r)=>{const y=_("Icon");return i(),S("div",Tt,[e(t).layout.menuCollapse?I("",!0):(i(),S("img",St)),e(t).layout.menuCollapse?I("",!0):(i(),S("div",{key:1,style:ne({color:e(t).getColorVal("menuActiveColor")}),class:"website-name"},T(e(l).siteName),5)),e(t).layout.layoutMode!="Streamline"?(i(),x(y,{key:2,onClick:u,name:e(t).layout.menuCollapse?"fa fa-indent":"fa fa-dedent",class:E([e(t).layout.menuCollapse?"unfold":"","fold"]),color:e(t).getColorVal("menuActiveColor"),size:"18"},null,8,["name","class","color"])):I("",!0)])}}}),Ze=R(Bt,[["__scopeId","data-v-38fd2478"]]),Mt=A({__name:"menuTree",props:{menus:{default:()=>[]},extends:{default:()=>({level:1})}},setup(b){K(r=>({"5010b154":e(l).getColorVal("menuActiveBackground")}));const{t}=_e.useI18n(),l=N(),u=b,d=r=>{var y,c;if(((y=u.extends)==null?void 0:y.position)=="horizontal"&&u.extends.level<=1&&((c=r.children)!=null&&c.length)){const m=Ve(r.children);m?Ee(m):ut({type:"error",message:t("utils.No child menu to jump to!")})}};return(r,y)=>{const c=_("Icon"),m=_("menu-tree",!0),h=_("el-sub-menu"),w=_("el-menu-item");return i(!0),S(U,null,ae(u.menus,v=>(i(),S(U,null,[v.children&&v.children.length>0?(i(),x(h,{onClick:a=>d(v),index:v.path,key:v.path},{title:s(()=>{var a,n,B,F;return[o(c,{color:e(l).getColorVal("menuColor"),name:(a=v.meta)!=null&&a.icon?(n=v.meta)==null?void 0:n.icon:e(l).layout.menuDefaultIcon},null,8,["color","name"]),p("span",null,T((B=v.meta)!=null&&B.title?(F=v.meta)==null?void 0:F.title:r.$t("noTitle")),1)]}),default:s(()=>[o(m,{extends:{...u.extends,level:u.extends.level+1},menus:v.children},null,8,["extends","menus"])]),_:2},1032,["onClick","index"])):(i(),x(w,{index:v.path,key:v.path,onClick:a=>e(Ee)(v)},{default:s(()=>{var a,n,B,F;return[o(c,{color:e(l).getColorVal("menuColor"),name:(a=v.meta)!=null&&a.icon?(n=v.meta)==null?void 0:n.icon:e(l).layout.menuDefaultIcon},null,8,["color","name"]),p("span",null,T((B=v.meta)!=null&&B.title?(F=v.meta)==null?void 0:F.title:r.$t("noTitle")),1)]}),_:2},1032,["index","onClick"]))],64))),256)}}}),ve=R(Mt,[["__scopeId","data-v-99fc3008"]]),Vt=A({__name:"menuVertical",setup(b){K(m=>({"31f3c86a":r.value,"7a042cf1":e(t).getColorVal("menuBackground"),"8461db24":e(t).getColorVal("menuColor"),"29aca588":e(t).getColorVal("menuActiveColor")}));const t=N(),l=P(),u=te(),d=W({defaultActive:""}),r=ce(()=>{let m=0;return t.layout.menuShowTopBar&&(m=50),t.layout.layoutMode=="Default"?"calc(100vh - "+(32+m)+"px)":"calc(100vh - "+m+"px)"}),y=m=>{d.defaultActive=m.path},c=()=>{G(()=>{var h;let m=document.querySelector(".el-menu.layouts-menu-vertical li.is-active");if(!m)return!1;(h=j.value)==null||h.setScrollTop(m.offsetTop)})};return X(()=>{y(u),c()}),ie(m=>{y(m)}),(m,h)=>{const w=_("el-menu"),v=_("el-scrollbar");return i(),x(v,{ref_key:"layoutMenuScrollbarRef",ref:j,class:"vertical-menus-scrollbar"},{default:s(()=>[o(w,{class:"layouts-menu-vertical","collapse-transition":!1,"unique-opened":e(t).layout.menuUniqueOpened,"default-active":d.defaultActive,collapse:e(t).layout.menuCollapse,ref_key:"layoutMenuRef",ref:pe},{default:s(()=>[o(ve,{menus:e(l).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["unique-opened","default-active","collapse"])]),_:1},512)}}}),$e=(b,t)=>{for(let l=0;l<t.length;l++){const u=t[l];if(u.path==b||u.children&&u.children.length>0&&$e(b,u.children))return u}return!1},$t=A({__name:"menuVerticalChildren",setup(b){K(m=>({"3ef6a352":r.value,"09919fd9":e(t).getColorVal("menuBackground"),"45e122f4":e(t).getColorVal("menuColor"),e864e0c0:e(t).getColorVal("menuActiveColor")}));const t=N(),l=P(),u=te(),d=W({defaultActive:"",routeChildren:[]}),r=ce(()=>{let m=0;return t.layout.menuShowTopBar&&(m=50),t.layout.layoutMode=="Default"?"calc(100vh - "+(32+m)+"px)":"calc(100vh - "+m+"px)"}),y=m=>{let h=$e(m.path,l.state.tabsViewRoutes);h?(d.defaultActive=m.path,h.children&&h.children.length>0?d.routeChildren=h.children:d.routeChildren=[h]):d.routeChildren||(d.routeChildren=l.state.tabsViewRoutes)},c=()=>{G(()=>{var h;let m=document.querySelector(".el-menu.layouts-menu-vertical-children li.is-active");if(!m)return!1;(h=j.value)==null||h.setScrollTop(m.offsetTop)})};return X(()=>{y(u),c(),new Te(j.value.wrapRef)}),ie(m=>{y(m)}),(m,h)=>{const w=_("el-menu"),v=_("el-scrollbar");return i(),x(v,{ref_key:"layoutMenuScrollbarRef",ref:j,class:"children-vertical-menus-scrollbar"},{default:s(()=>[o(w,{class:"layouts-menu-vertical-children","collapse-transition":!1,"unique-opened":e(t).layout.menuUniqueOpened,"default-active":d.defaultActive,collapse:e(t).layout.menuCollapse,ref_key:"layoutMenuRef",ref:pe},{default:s(()=>[d.routeChildren.length>0?(i(),x(ve,{key:0,menus:d.routeChildren},null,8,["menus"])):I("",!0)]),_:1},8,["unique-opened","default-active","collapse"])]),_:1},512)}}}),It=A({name:"layout/aside",__name:"aside",setup(b){K(d=>({"12d2a223":u.value}));const t=N(),l=P(),u=ce(()=>t.menuWidth());return(d,r)=>{const y=_("el-aside");return e(l).state.tabFullScreen?I("",!0):(i(),x(y,{key:0,class:E("layout-aside-"+e(t).layout.layoutMode+" "+(e(t).layout.shrink?"shrink":""))},{default:s(()=>[e(t).layout.menuShowTopBar?(i(),x(Ze,{key:0})):I("",!0),e(t).layout.layoutMode=="Double"?(i(),x($t,{key:1})):(i(),x(Vt,{key:2}))]),_:1},8,["class"]))}}}),Ie=R(It,[["__scopeId","data-v-be977e32"]]);function Ge(){if(!ze())throw new Error("useCurrentInstance() can only be used inside setup() or functional components!");const{appContext:b}=ze();return{proxy:b.config.globalProperties}}const At={class:"el-dropdown-menu"},Rt=["onClick"],Ft=A({__name:"index",props:{width:{default:150},items:{default:()=>[]}},emits:["menuClick","hideContextmenu"],setup(b,{expose:t,emit:l}){const u=b,d=l,r=W({show:!1,axis:{x:0,y:0},sourceData:null,showArrow:!0,arrowAxis:10}),y=(h,w)=>{r.showArrow=!0,r.sourceData=h;const v=document.documentElement.clientHeight-w.y-(u.items.length*40+20),a=document.documentElement.clientWidth-w.x-(u.width+20);v<0&&(w.y+=v,r.showArrow=!1),a<0&&(w.x+=a,r.showArrow=!1),r.axis=w,r.show=!0},c=()=>{r.show=!1,d("hideContextmenu")},m=h=>{h.disabled||(h.sourceData=ct(r.sourceData),d("menuClick",h))};return t({onShowContextmenu:y,onHideContextmenu:c}),X(()=>{se(document,"click",c),se(document,"scroll",c),se(document,"keydown",h=>{h.key==="Escape"&&c()})}),(h,w)=>{const v=_("Icon");return i(),x(Be,{name:"el-zoom-in-center"},{default:s(()=>[H((i(),S("div",{class:"el-popper is-pure is-light el-dropdown__popper ba-contextmenu",style:ne(`top: ${r.axis.y+5}px;left: ${r.axis.x-14}px;width:${u.width}px`),key:Math.random(),"aria-hidden":"false","data-popper-placement":"bottom"},[p("ul",At,[(i(!0),S(U,null,ae(u.items,(a,n)=>(i(),S("li",{key:n,class:E(["el-dropdown-menu__item",a.disabled?"is-disabled":""]),tabindex:"-1",onClick:B=>m(a)},[o(v,{size:"12",name:a.icon},null,8,["name"]),p("span",null,T(a.label),1)],10,Rt))),128))]),r.showArrow?(i(),S("span",{key:0,class:"el-popper__arrow",style:ne({left:`${r.arrowAxis}px`})},null,4)):I("",!0)],4)),[[He,r.show]])]),_:1})}}}),zt=R(Ft,[["__scopeId","data-v-0380e8de"]]),Lt=["onClick","onContextmenu"],Dt=A({__name:"tabs",setup(b,{expose:t}){K(f=>({"6ffb9aa0":e(d).getColorVal("headerBarTabColor"),"2739e76c":e(d).getColorVal("headerBarTabActiveColor"),"74c381b3":e(d).layout.layoutMode=="Default"?"none":e(d).getColorVal("headerBarBackground")}));const l=te(),u=Ke(),d=N(),r=P(),{proxy:y}=Ge(),c=Le(),m=tt(),h=Le(),w=W({contextmenuItems:[{name:"refresh",label:"重新加载",icon:"fa fa-refresh"},{name:"close",label:"关闭标签",icon:"fa fa-times"},{name:"fullScreen",label:"当前标签全屏",icon:"el-icon-FullScreen"},{name:"closeOther",label:"关闭其他标签",icon:"fa fa-minus"},{name:"closeAll",label:"关闭全部标签",icon:"fa fa-stop"}]}),v=W({width:"0",transform:"translateX(0px)"}),a=f=>{u.push(f)},n=function(f){if(!f)return!1;v.width=f.clientWidth+"px",v.transform=`translateX(${f.offsetLeft}px)`;let M=f.offsetLeft+f.clientWidth-c.value.clientWidth;f.offsetLeft<c.value.scrollLeft?c.value.scrollTo(f.offsetLeft,0):M>c.value.scrollLeft&&c.value.scrollTo(M,0)},B=()=>{const f=r.state.tabsView.slice(-1)[0];f?u.push(f):u.push(Ue)},F=f=>{var M;r._closeTab(f),y.eventBus.emit("onTabViewClose",f),((M=r.state.activeRoute)==null?void 0:M.path)===f.path?B():(r._setActiveRoute(r.state.activeRoute),G(()=>{n(m.value[r.state.activeIndex])})),h.value.onHideContextmenu()},k=f=>{var M;r._closeTabs(f),r._setActiveRoute(f),((M=r.state.activeRoute)==null?void 0:M.path)!==l.path&&u.push(f.path)},D=f=>{var $;let M=Ve(r.state.tabsViewRoutes);if(f&&M&&M.path==f.path)return k(f);if(M&&M.path==(($=r.state.activeRoute)==null?void 0:$.path))return k(r.state.activeRoute);r._closeTabs(!1),M&&fe(M.path)},Z=(f,M)=>{w.contextmenuItems[0].disabled=l.path!==f.path,w.contextmenuItems[4].disabled=w.contextmenuItems[3].disabled=r.state.tabsView.length==1;const{clientX:$,clientY:g}=M;h.value.onShowContextmenu(f,{x:$,y:g})},L=f=>{const{name:M,sourceData:$}=f;if($)switch(M){case"refresh":y.eventBus.emit("onTabViewRefresh",$);break;case"close":F($);break;case"closeOther":k($);break;case"closeAll":D($);break;case"fullScreen":l.path!==$.path&&u.push($.path),r.setFullScreen(!0);break}},O=function(f){r._addTab(f),r._setActiveRoute(f),G(()=>{n(m.value[r.state.activeIndex])})};return ie(async f=>{O(f)}),X(()=>{O(u.currentRoute.value),new Te(c.value)}),t({closeAllTab:D,closeTabByPath:f=>{for(const M in r.state.tabsView)if(r.state.tabsView[M].path==f){F(r.state.tabsView[M]);break}},updateTabTitle:(f,M)=>{r._updateTabTitle(f,M),G(()=>{n(m.value[r.state.activeIndex])})}}),(f,M)=>{const $=_("Icon");return i(),S("div",{class:"nav-tabs",ref_key:"tabScrollbarRef",ref:c},[(i(!0),S(U,null,ae(e(r).state.tabsView,(g,C)=>(i(),S("div",{onClick:Y=>a(g),onContextmenu:re(Y=>Z(g,Y),["prevent"]),class:E(["ba-nav-tab",e(r).state.activeIndex==C?"active":""]),ref_for:!0,ref:e(m).set,key:C},[V(T(g.meta.title)+" ",1),o(Be,{onAfterLeave:M[0]||(M[0]=Y=>n(e(m)[e(r).state.activeIndex])),name:"el-fade-in"},{default:s(()=>[H(o($,{class:"close-icon",onClick:re(Y=>F(g),["stop"]),size:"15",name:"el-icon-Close"},null,8,["onClick"]),[[He,e(r).state.tabsView.length>1]])]),_:2},1024)],42,Lt))),128)),p("div",{style:ne(v),class:"nav-tabs-active-box"},null,4),o(zt,{ref_key:"contextmenuRef",ref:h,items:w.contextmenuItems,onMenuClick:L},null,8,["items"])],512)}}}),Qe=R(Dt,[["__scopeId","data-v-4dd088a8"]]),Ne=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],J=(()=>{if(typeof document>"u")return!1;const b=Ne[0],t={};for(const l of Ne)if((l==null?void 0:l[1])in document){for(const[d,r]of l.entries())t[b[d]]=r;return t}return!1})(),Pe={change:J.fullscreenchange,error:J.fullscreenerror};let q={request(b=document.documentElement,t){return new Promise((l,u)=>{const d=()=>{q.off("change",d),l()};q.on("change",d);const r=b[J.requestFullscreen](t);r instanceof Promise&&r.then(d).catch(u)})},exit(){return new Promise((b,t)=>{if(!q.isFullscreen){b();return}const l=()=>{q.off("change",l),b()};q.on("change",l);const u=document[J.exitFullscreen]();u instanceof Promise&&u.then(l).catch(t)})},toggle(b,t){return q.isFullscreen?q.exit():q.request(b,t)},onchange(b){q.on("change",b)},onerror(b){q.on("error",b)},on(b,t){const l=Pe[b];l&&document.addEventListener(l,t,!1)},off(b,t){const l=Pe[b];l&&document.removeEventListener(l,t,!1)},raw:J};Object.defineProperties(q,{isFullscreen:{get:()=>!!document[J.fullscreenElement]},element:{enumerable:!0,get:()=>document[J.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>!!document[J.fullscreenEnabled]}});J||(q={isEnabled:!1});const me=q,ge=b=>(je("data-v-06c3bb38"),b=b(),Xe(),b),Et={class:"layout-config-drawer"},Nt={class:"layout-mode-styles-box"},Pt={class:"layout-mode-box-style"},Ut=ge(()=>p("div",{class:"layout-mode-style-box"},[p("div",{class:"layout-mode-style-aside"}),p("div",{class:"layout-mode-style-container-box"},[p("div",{class:"layout-mode-style-header"}),p("div",{class:"layout-mode-style-container"})])],-1)),qt={class:"layout-mode-style-name"},Wt=ge(()=>p("div",{class:"layout-mode-style-box"},[p("div",{class:"layout-mode-style-aside"}),p("div",{class:"layout-mode-style-container-box"},[p("div",{class:"layout-mode-style-header"}),p("div",{class:"layout-mode-style-container"})])],-1)),Ot={class:"layout-mode-style-name"},Ht=ge(()=>p("div",{class:"layout-mode-style-box"},[p("div",{class:"layout-mode-style-container-box"},[p("div",{class:"layout-mode-style-header"}),p("div",{class:"layout-mode-style-container"})])],-1)),Kt={class:"layout-mode-style-name"},jt=ge(()=>p("div",{class:"layout-mode-style-box"},[p("div",{class:"layout-mode-style-aside"}),p("div",{class:"layout-mode-style-container-box"},[p("div",{class:"layout-mode-style-header"}),p("div",{class:"layout-mode-style-container"})])],-1)),Xt={class:"layout-mode-style-name"},Yt={class:"layout-config-global"},Jt={class:"layout-config-aside"},Zt={class:"layout-config-aside"},Gt={class:"ba-center"},Qt=A({__name:"config",setup(b){const{t}=_e.useI18n(),l=N(),u=P(),d=Ke(),r=(v,a)=>{l.setLayout(a,v)},y=(v,a)=>{if(v===null)return;const n=l.layout[a];l.layout.isDark?n[1]=v:n[0]=v,l.setLayout(a,n)},c=v=>{le.set(ue,{layoutMode:v,menuCollapse:l.layout.menuCollapse}),l.setLayoutMode(v)},m=(v,a)=>{l.setLayout(a,v);const n=u.state.tabsViewRoutes;u.setTabsViewRoutes([]),setTimeout(()=>{u.setTabsViewRoutes(n)},200)},h=()=>{l.setLayout("showDrawer",!1)},w=()=>{ee.remove(ot),le.remove(ue),d.go(0)};return(v,a)=>{const n=_("el-divider"),B=_("el-col"),F=_("el-row"),k=_("el-form-item"),D=_("el-option"),Z=_("el-select"),L=_("el-color-picker"),O=_("el-switch"),Q=_("el-input"),oe=_("el-button"),f=_("el-popconfirm"),M=_("el-form"),$=_("el-scrollbar"),g=_("el-drawer");return i(),S("div",Et,[o(g,{"model-value":e(l).layout.showDrawer,title:e(t)("layouts.Layout configuration"),size:"310px",onClose:h},{default:s(()=>[o($,{class:"layout-mode-style-scrollbar"},{default:s(()=>[o(M,{ref:"formRef",model:e(l).layout},{default:s(()=>[p("div",Nt,[o(n,{"border-style":"dashed"},{default:s(()=>[V(T(e(t)("layouts.Layout mode")),1)]),_:1}),p("div",Pt,[o(F,{class:"layout-mode-box-style-row",gutter:10},{default:s(()=>[o(B,{span:12},{default:s(()=>[p("div",{onClick:a[0]||(a[0]=C=>c("Default")),class:E(["layout-mode-style default",e(l).layout.layoutMode=="Default"?"active":""])},[Ut,p("div",qt,T(e(t)("layouts.default")),1)],2)]),_:1}),o(B,{span:12},{default:s(()=>[p("div",{onClick:a[1]||(a[1]=C=>c("Classic")),class:E(["layout-mode-style classic",e(l).layout.layoutMode=="Classic"?"active":""])},[Wt,p("div",Ot,T(e(t)("layouts.classic")),1)],2)]),_:1})]),_:1}),o(F,{gutter:10},{default:s(()=>[o(B,{span:12},{default:s(()=>[p("div",{onClick:a[2]||(a[2]=C=>c("Streamline")),class:E(["layout-mode-style streamline",e(l).layout.layoutMode=="Streamline"?"active":""])},[Ht,p("div",Kt,T(e(t)("layouts.Single column")),1)],2)]),_:1}),o(B,{span:12},{default:s(()=>[p("div",{onClick:a[3]||(a[3]=C=>c("Double")),class:E(["layout-mode-style double",e(l).layout.layoutMode=="Double"?"active":""])},[jt,p("div",Xt,T(e(t)("layouts.Double column")),1)],2)]),_:1})]),_:1})]),o(n,{"border-style":"dashed"},{default:s(()=>[V(T(e(t)("layouts.overall situation")),1)]),_:1}),p("div",Yt,[o(k,{size:"large",label:e(t)("layouts.Dark mode")},{default:s(()=>[o(gt,{onClick:a[4]||(a[4]=C=>e(kt)())})]),_:1},8,["label"]),o(k,{label:e(t)("layouts.Background page switching animation")},{default:s(()=>[o(Z,{onChange:a[5]||(a[5]=C=>r(C,"mainAnimation")),"model-value":e(l).layout.mainAnimation,placeholder:e(t)("layouts.Please select an animation name")},{default:s(()=>[o(D,{label:"slide-right",value:"slide-right"}),o(D,{label:"slide-left",value:"slide-left"}),o(D,{label:"el-fade-in-linear",value:"el-fade-in-linear"}),o(D,{label:"el-fade-in",value:"el-fade-in"}),o(D,{label:"el-zoom-in-center",value:"el-zoom-in-center"}),o(D,{label:"el-zoom-in-top",value:"el-zoom-in-top"}),o(D,{label:"el-zoom-in-bottom",value:"el-zoom-in-bottom"})]),_:1},8,["model-value","placeholder"])]),_:1},8,["label"])]),o(n,{"border-style":"dashed"},{default:s(()=>[V(T(e(t)("layouts.sidebar")),1)]),_:1}),p("div",Jt,[o(k,{label:e(t)("layouts.Side menu bar background color")},{default:s(()=>[o(L,{onChange:a[6]||(a[6]=C=>y(C,"menuBackground")),"model-value":e(l).getColorVal("menuBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(k,{label:e(t)("layouts.Side menu text color")},{default:s(()=>[o(L,{onChange:a[7]||(a[7]=C=>y(C,"menuColor")),"model-value":e(l).getColorVal("menuColor")},null,8,["model-value"])]),_:1},8,["label"]),o(k,{label:e(t)("layouts.Side menu active item background color")},{default:s(()=>[o(L,{onChange:a[8]||(a[8]=C=>y(C,"menuActiveBackground")),"model-value":e(l).getColorVal("menuActiveBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(k,{label:e(t)("layouts.Side menu active item text color")},{default:s(()=>[o(L,{onChange:a[9]||(a[9]=C=>y(C,"menuActiveColor")),"model-value":e(l).getColorVal("menuActiveColor")},null,8,["model-value"])]),_:1},8,["label"]),o(k,{label:e(t)("layouts.Show side menu top bar (logo bar)")},{default:s(()=>[o(O,{onChange:a[10]||(a[10]=C=>r(C,"menuShowTopBar")),"model-value":e(l).layout.menuShowTopBar},null,8,["model-value"])]),_:1},8,["label"]),o(k,{label:e(t)("layouts.Side menu top bar background color")},{default:s(()=>[o(L,{onChange:a[11]||(a[11]=C=>y(C,"menuTopBarBackground")),"model-value":e(l).getColorVal("menuTopBarBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(k,{label:e(t)("layouts.Side menu width (when expanded)")},{default:s(()=>[o(Q,{onInput:a[12]||(a[12]=C=>r(C,"menuWidth")),type:"number",step:10,"model-value":e(l).layout.menuWidth},{append:s(()=>[V("px")]),_:1},8,["model-value"])]),_:1},8,["label"]),o(k,{label:e(t)("layouts.Side menu default icon")},{default:s(()=>[o(Ct,{onChange:a[13]||(a[13]=C=>m(C,"menuDefaultIcon")),"model-value":e(l).layout.menuDefaultIcon},null,8,["model-value"])]),_:1},8,["label"]),o(k,{label:e(t)("layouts.Side menu horizontal collapse")},{default:s(()=>[o(O,{onChange:a[14]||(a[14]=C=>r(C,"menuCollapse")),"model-value":e(l).layout.menuCollapse},null,8,["model-value"])]),_:1},8,["label"]),o(k,{label:e(t)("layouts.Side menu accordion")},{default:s(()=>[o(O,{onChange:a[15]||(a[15]=C=>r(C,"menuUniqueOpened")),"model-value":e(l).layout.menuUniqueOpened},null,8,["model-value"])]),_:1},8,["label"])]),o(n,{"border-style":"dashed"},{default:s(()=>[V(T(e(t)("layouts.Top bar")),1)]),_:1}),p("div",Zt,[o(k,{label:e(t)("layouts.Top bar background color")},{default:s(()=>[o(L,{onChange:a[16]||(a[16]=C=>y(C,"headerBarBackground")),"model-value":e(l).getColorVal("headerBarBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(k,{label:e(t)("layouts.Top bar text color")},{default:s(()=>[o(L,{onChange:a[17]||(a[17]=C=>y(C,"headerBarTabColor")),"model-value":e(l).getColorVal("headerBarTabColor")},null,8,["model-value"])]),_:1},8,["label"]),o(k,{label:e(t)("layouts.Background color when hovering over the top bar")},{default:s(()=>[o(L,{onChange:a[18]||(a[18]=C=>y(C,"headerBarHoverBackground")),"model-value":e(l).getColorVal("headerBarHoverBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(k,{label:e(t)("layouts.Top bar menu active item background color")},{default:s(()=>[o(L,{onChange:a[19]||(a[19]=C=>y(C,"headerBarTabActiveBackground")),"model-value":e(l).getColorVal("headerBarTabActiveBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(k,{label:e(t)("layouts.Top bar menu active item text color")},{default:s(()=>[o(L,{onChange:a[20]||(a[20]=C=>y(C,"headerBarTabActiveColor")),"model-value":e(l).getColorVal("headerBarTabActiveColor")},null,8,["model-value"])]),_:1},8,["label"])]),o(f,{onConfirm:w,title:e(t)("layouts.Are you sure you want to restore all configurations to the default values?")},{reference:s(()=>[p("div",Gt,[o(oe,{class:"w80",type:"info"},{default:s(()=>[V(T(e(t)("layouts.Restore default")),1)]),_:1})])]),_:1},8,["title"])])]),_:1},8,["model"])]),_:1})]),_:1},8,["model-value","title"])])}}}),eo=R(Qt,[["__scopeId","data-v-06c3bb38"]]),to={class:"command"},oo={class:"task-opt"},lo=["onClick"],no={class:"indent-2"},ao={class:"package-manager-dialog-footer"},so={class:"config-buttons"},ro=A({__name:"index",setup(b){const{t}=_e.useI18n(),l=Se(),u=W({terminalWarning:"",port:l.state.port,menuExpand:document.documentElement.clientWidth>1840}),d=ce(()=>{let a=l.state.port==""?"80":l.state.port;return a=="8000"?"php think run":"php think run -p "+a}),r=ce(()=>{let a=l.state.port==""?"":":"+l.state.port;return"http://localhost"+a+" "+t("terminal.or")+" http://"+t("terminal.Site domain name")+a}),y=a=>{Ae({port:a}).then(n=>{n.code==1?(l.changePort(a),v()):u.port=l.state.port}).catch(()=>{u.port=l.state.port})},c=a=>{let n=t("terminal.unknown"),B="info";switch(a){case z.Waiting:n=t("terminal.Waiting for execution"),B="info";break;case z.Connecting:n=t("terminal.Connecting"),B="warning";break;case z.Executing:n=t("terminal.Executing"),B="warning";break;case z.Success:n=t("terminal.Successful execution"),B="success";break;case z.Failed:n=t("terminal.Execution failed"),B="danger";break;case z.Unknown:n=t("terminal.Unknown execution result"),B="danger";break}return{statusText:n,statusType:B}},m=()=>{mt.confirm(t("terminal.Are you sure you want to republish?"),t("Reminder"),{confirmButtonText:t("Confirm"),cancelButtonText:t("Cancel"),type:"warning"}).then(()=>{l.addTaskPM("web-build")})},h=a=>{Ae({manager:a}).then(n=>{n.code==1&&l.changePackageManager(a)}),l.togglePackageManagerDialog(!1)},w=a=>{u.terminalWarning=a},v=()=>{lt()!=l.state.port?w(t("terminal.The current terminal is not running under the installation service, and some commands may not be executed")):w("")};return Ye(()=>l.state.port,a=>{a!=u.port&&(u.port=a,v())}),X(()=>{v()}),(a,n)=>{const B=_("el-alert"),F=_("el-tag"),k=_("el-button"),D=_("Icon"),Z=_("el-card"),L=_("el-timeline-item"),O=_("el-timeline"),Q=_("el-empty"),oe=_("el-button-group"),f=_("el-dialog"),M=_("el-form"),$=it("blur");return i(),S(U,null,[o(f,dt(a.$attrs,{modelValue:e(l).state.show,"onUpdate:modelValue":n[7]||(n[7]=g=>e(l).state.show=g),title:e(t)("terminal.Terminal"),class:"ba-terminal-dialog","append-to-body":!0}),{default:s(()=>[u.terminalWarning?(i(),x(B,{key:0,class:"terminal-warning-alert",title:u.terminalWarning,type:"error"},null,8,["title"])):I("",!0),e(l).state.taskList.length?(i(),x(O,{key:1},{default:s(()=>[(i(!0),S(U,null,ae(e(l).state.taskList,(g,C)=>(i(),x(L,{key:C,class:E(["task-item","task-status-"+g.status]),type:c(g.status).statusType,center:"",timestamp:g.createTime,placement:"top"},{default:s(()=>[o(Z,null,{default:s(()=>[p("div",null,[o(F,{type:c(g.status).statusType},{default:s(()=>[V(T(c(g.status).statusText),1)]),_:2},1032,["type"]),(g.status==e(z).Failed||g.status==e(z).Unknown)&&g.blockOnFailure?(i(),x(F,{key:0,class:"block-on-failure-tag",type:"warning"},{default:s(()=>[V(T(e(t)("terminal.Failure to execute this command will block the execution of the queue")),1)]),_:1})):I("",!0),g.status==e(z).Executing||g.status==e(z).Connecting?(i(),x(F,{key:1,class:"block-on-failure-tag",type:"danger"},{default:s(()=>[V(T(e(t)("terminal.Do not refresh the browser")),1)]),_:1})):I("",!0),p("span",to,T(g.command),1),p("div",oo,[g.status==e(z).Failed||g.status==e(z).Unknown?H((i(),x(k,{key:0,title:e(t)("Retry"),size:"small",type:"warning",icon:"el-icon-RefreshRight",circle:"",onClick:Y=>e(l).retryTask(C)},null,8,["title","onClick"])),[[$]]):I("",!0),H(o(k,{onClick:Y=>e(l).delTask(C),title:e(t)("Delete"),size:"small",type:"danger",icon:"el-icon-Delete",circle:""},null,8,["onClick","title"]),[[$]])])]),g.status!=e(z).Waiting?(i(),S(U,{key:0},[g.status!=e(z).Connecting&&g.status!=e(z).Executing?(i(),S("div",{key:0,onClick:Y=>e(l).setTaskShowMessage(C),class:"toggle-message-display"},[p("span",null,T(e(t)("terminal.Command run log")),1),o(D,{name:g.showMessage?"el-icon-ArrowUp":"el-icon-ArrowDown",size:"16",color:"#909399"},null,8,["name"])],8,lo)):I("",!0),g.status==e(z).Connecting||g.status==e(z).Executing||g.status>e(z).Executing&&g.showMessage?(i(),S("div",{key:1,class:E(["exec-message","exec-message-"+g.uuid])},[(i(!0),S(U,null,ae(g.message,(Y,et)=>(i(),S("pre",{key:et,class:"message-item"},T(Y),1))),128))],2)):I("",!0)],64)):I("",!0)]),_:2},1024)]),_:2},1032,["class","type","timestamp"]))),128))]),_:1})):(i(),x(Q,{key:2,"image-size":80,description:e(t)("terminal.No mission yet")},null,8,["description"])),o(oe,null,{default:s(()=>[H((i(),x(k,{class:"terminal-menu-item",icon:"el-icon-MagicStick",onClick:n[0]||(n[0]=g=>e(l).addTaskPM("test",!1))},{default:s(()=>[V(T(e(t)("terminal.Test command")),1)]),_:1})),[[$]]),H((i(),x(k,{class:"terminal-menu-item",icon:"el-icon-Download",onClick:n[1]||(n[1]=g=>e(l).addTaskPM("web-install"))},{default:s(()=>[V(T(e(t)("terminal.Install dependent packages")),1)]),_:1})),[[$]]),H((i(),x(k,{class:"terminal-menu-item",icon:"el-icon-Sell",onClick:n[2]||(n[2]=g=>m())},{default:s(()=>[V(T(e(t)("terminal.Republish")),1)]),_:1})),[[$]]),u.menuExpand?(i(),S(U,{key:1},[H((i(),x(k,{class:"terminal-menu-item",icon:"el-icon-Delete",onClick:n[4]||(n[4]=g=>e(l).clearSuccessTask())},{default:s(()=>[V(T(e(t)("terminal.Clean up task list")),1)]),_:1})),[[$]]),H((i(),x(k,{class:"terminal-menu-item",icon:"el-icon-Switch",onClick:n[5]||(n[5]=g=>e(l).togglePackageManagerDialog(!0))},{default:s(()=>[V(T(e(t)("terminal.Package manager"))+" "+T(e(l).state.packageManager.toUpperCase()),1)]),_:1})),[[$]]),H((i(),x(k,{class:"terminal-menu-item",icon:"el-icon-Tools",onClick:n[6]||(n[6]=g=>e(l).toggleConfigDialog())},{default:s(()=>[V(T(e(t)("terminal.Terminal settings")),1)]),_:1})),[[$]])],64)):H((i(),x(k,{key:0,class:"terminal-menu-item",icon:"el-icon-Expand",onClick:n[3]||(n[3]=g=>u.menuExpand=!0)},null,512)),[[$]])]),_:1})]),_:1},16,["modelValue","title"]),o(f,{onClose:n[14]||(n[14]=g=>e(l).togglePackageManagerDialog(!1)),"model-value":e(l).state.showPackageManagerDialog,class:"ba-terminal-dialog",title:e(t)("terminal.Please select package manager"),center:""},{footer:s(()=>[p("div",ao,[o(k,{onClick:n[8]||(n[8]=g=>h("npm"))},{default:s(()=>[V("npm")]),_:1}),o(k,{onClick:n[9]||(n[9]=g=>h("cnpm"))},{default:s(()=>[V("cnpm")]),_:1}),o(k,{onClick:n[10]||(n[10]=g=>h("pnpm"))},{default:s(()=>[V("pnpm")]),_:1}),o(k,{onClick:n[11]||(n[11]=g=>h("yarn"))},{default:s(()=>[V("yarn")]),_:1}),o(k,{onClick:n[12]||(n[12]=g=>h("ni"))},{default:s(()=>[V("ni")]),_:1}),o(k,{onClick:n[13]||(n[13]=g=>h("none"))},{default:s(()=>[V(T(e(t)("terminal.I want to execute the command manually")),1)]),_:1})])]),default:s(()=>[p("div",no,T(e(t)("terminal.Switch package manager title")),1)]),_:1},8,["model-value","title"]),o(f,{onClose:n[19]||(n[19]=g=>e(l).toggleConfigDialog(!1)),"model-value":e(l).state.showConfig,class:"ba-terminal-dialog",title:e(t)("terminal.Terminal settings")},{default:s(()=>[o(M,{"label-position":"top"},{default:s(()=>[o(de,{label:e(t)("terminal.Install service port"),modelValue:u.port,"onUpdate:modelValue":n[15]||(n[15]=g=>u.port=g),type:"number","input-attr":{onChange:y},placeholder:e(t)("terminal.The port number to start the installation service (this port needs to be opened for external network access)")},null,8,["label","modelValue","input-attr","placeholder"]),o(de,{label:e(t)("terminal.Installation service startup command"),modelValue:d.value,"onUpdate:modelValue":n[16]||(n[16]=g=>d.value=g),type:"string","input-attr":{disabled:!0},"block-help":e(t)("terminal.Please execute this command to start the service (add Su under Linux)")},null,8,["label","modelValue","block-help"]),o(de,{label:e(t)("terminal.Installation service URL"),modelValue:r.value,"onUpdate:modelValue":n[17]||(n[17]=g=>r.value=g),type:"string","input-attr":{disabled:!0},"block-help":e(t)("terminal.Please access the site through the installation service URL (except in debug mode)")},null,8,["label","modelValue","block-help"])]),_:1}),o(de,{label:e(t)("terminal.Clean up successful tasks when starting a new task"),"model-value":e(l).state.automaticCleanupTask,type:"radio","input-attr":{border:!0,content:{0:e(t)("Disable"),1:e(t)("Enable")},onChange:e(l).changeAutomaticCleanupTask}},null,8,["label","model-value","input-attr"]),p("div",so,[o(k,{onClick:n[18]||(n[18]=g=>e(l).toggleConfigDialog(!1))},{default:s(()=>[V(T(e(t)("terminal.Back to terminal")),1)]),_:1})])]),_:1},8,["model-value","title"])],64)}}}),uo=R(ro,[["__scopeId","data-v-77ea2582"]]),co={class:"nav-menu-item"},io=["src"],mo={class:"admin-name"},fo={class:"admin-info-base"},po=["src"],_o={class:"admin-info-other"},vo={class:"admin-info-name"},go={class:"admin-info-lasttime"},yo={class:"admin-info-footer"},bo=A({__name:"navMenus",setup(b){K(a=>({"02d4915c":e(u).getColorVal("headerBarBackground"),"548ea232":e(u).getColorVal("headerBarTabColor"),"40e44a14":e(u).getColorVal("headerBarHoverBackground")}));const{t}=_e.useI18n(),l=qe(),u=N(),d=Se(),r=xe(),y=W({isFullScreen:!1,currentNavMenu:"",showLayoutDrawer:!1,showAdminInfoPopover:!1}),c=(a,n)=>{y.currentNavMenu=a?n:""},m=()=>{if(!me.isEnabled)return ft.warning(t("layouts.Full screen is not supported")),!1;me.toggle(),me.onchange(()=>{y.isFullScreen=me.isFullscreen})},h=()=>{y.showAdminInfoPopover=!1,fe({name:"routine/adminInfo"})},w=()=>{wt().then(()=>{ee.remove(ke),We.go(0)})},v=a=>{if(a=="storage"||a=="all"){const n=ee.get(ke),B=ee.get(Fe);if(le.clear(),ee.clear(),ee.set(ke,n),ee.set(Fe,B),a=="storage")return}at(a).then(()=>{})};return(a,n)=>{const B=_("Icon"),F=_("router-link"),k=_("el-dropdown-item"),D=_("el-dropdown-menu"),Z=_("el-dropdown"),L=_("el-badge"),O=_("el-avatar"),Q=_("el-button"),oe=_("el-popover");return i(),S("div",{class:E(["nav-menus",e(u).layout.layoutMode])},[o(F,{class:"h100",target:"_blank",title:e(t)("Home"),to:"/"},{default:s(()=>[p("div",co,[o(B,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-Monitor",size:"18"},null,8,["color"])])]),_:1},8,["title"]),o(Z,{onVisibleChange:n[0]||(n[0]=f=>c(f,"lang")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:s(()=>[o(D,{class:"dropdown-menu-box"},{default:s(()=>[(i(!0),S(U,null,ae(e(u).lang.langArray,f=>(i(),x(k,{key:f.name,onClick:M=>e(nt)(f.name)},{default:s(()=>[V(T(f.value),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:s(()=>[p("div",{class:E(["nav-menu-item pt2",y.currentNavMenu=="lang"?"hover":""])},[o(B,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-lang",size:"18"},null,8,["color"])],2)]),_:1}),p("div",{onClick:m,class:E(["nav-menu-item",y.isFullScreen?"hover":""])},[y.isFullScreen?(i(),x(B,{key:0,color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-full-screen-cancel",size:"18"},null,8,["color"])):(i(),x(B,{key:1,color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-FullScreen",size:"18"},null,8,["color"]))],2),e(l).super?(i(),S("div",{key:0,onClick:n[1]||(n[1]=f=>e(d).toggle()),class:"nav-menu-item pt2"},[o(L,{"is-dot":e(d).state.showDot},{default:s(()=>[o(B,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-terminal",size:"26"},null,8,["color"])]),_:1},8,["is-dot"])])):I("",!0),e(l).super?(i(),x(Z,{key:1,onVisibleChange:n[5]||(n[5]=f=>c(f,"clear")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:s(()=>[o(D,{class:"dropdown-menu-box"},{default:s(()=>[o(k,{onClick:n[2]||(n[2]=f=>v("tp"))},{default:s(()=>[V(T(e(t)("utils.Clean up system cache")),1)]),_:1}),o(k,{onClick:n[3]||(n[3]=f=>v("storage"))},{default:s(()=>[V(T(e(t)("utils.Clean up browser cache")),1)]),_:1}),o(k,{onClick:n[4]||(n[4]=f=>v("all")),divided:""},{default:s(()=>[V(T(e(t)("utils.Clean up all cache")),1)]),_:1})]),_:1})]),default:s(()=>[p("div",{class:E(["nav-menu-item",y.currentNavMenu=="clear"?"hover":""])},[o(B,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-Delete",size:"18"},null,8,["color"])],2)]),_:1})):I("",!0),e(r).userInitialize?(i(),x(oe,{key:2,onShow:n[6]||(n[6]=f=>c(!0,"adminInfo")),onHide:n[7]||(n[7]=f=>c(!1,"adminInfo")),placement:"bottom-end","hide-after":0,width:260,trigger:"click","popper-class":"admin-info-box",visible:y.showAdminInfoPopover,"onUpdate:visible":n[8]||(n[8]=f=>y.showAdminInfoPopover=f)},{reference:s(()=>[p("div",{class:E(["admin-info",y.currentNavMenu=="adminInfo"?"hover":""])},[o(O,{size:25,fit:"fill"},{default:s(()=>[p("img",{src:e(Re)(e(l).avatar),alt:""},null,8,io)]),_:1}),p("div",mo,T(e(l).nickname),1)],2)]),default:s(()=>[p("div",null,[p("div",fo,[o(O,{size:70,fit:"fill"},{default:s(()=>[p("img",{src:e(Re)(e(l).avatar),alt:""},null,8,po)]),_:1}),p("div",_o,[p("div",vo,T(e(l).nickname),1),p("div",go,T(e(l).last_login_time),1)])]),p("div",yo,[o(Q,{onClick:h,type:"primary",plain:""},{default:s(()=>[V(T(e(t)("layouts.personal data")),1)]),_:1}),o(Q,{onClick:w,type:"danger",plain:""},{default:s(()=>[V(T(e(t)("layouts.cancellation")),1)]),_:1})])])]),_:1},8,["visible"])):I("",!0),p("div",{onClick:n[9]||(n[9]=f=>e(u).setLayout("showDrawer",!0)),class:"nav-menu-item"},[o(B,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"fa fa-cogs",size:"18"},null,8,["color"])]),o(eo),o(uo)],2)}}}),ye=R(bo,[["__scopeId","data-v-3c79f356"]]),ho={class:"nav-bar"},Co=A({__name:"default",setup(b){K(l=>({"67abd059":e(t).getColorVal("headerBarTabColor"),f0bff19a:e(t).getColorVal("headerBarTabActiveColor"),"00d66b4c":e(t).getColorVal("headerBarTabActiveBackground")}));const t=N();return(l,u)=>(i(),S("div",ho,[o(Qe,{ref_key:"layoutNavTabsRef",ref:Oe},null,512),o(ye)]))}}),ko=R(Co,[["__scopeId","data-v-528ceb49"]]),wo={class:"nav-bar"},xo={key:0,class:"unfold"},To=A({__name:"classic",setup(b){K(u=>({"737cd666":e(t).getColorVal("headerBarBackground"),"0af9a26d":e(t).getColorVal("headerBarTabColor"),"88760b72":e(t).getColorVal("headerBarTabActiveColor"),"7cfea179":e(t).getColorVal("headerBarHoverBackground"),e21b7690:e(t).getColorVal("headerBarTabActiveBackground")}));const t=N(),l=()=>{bt("ba-aside-menu-shade",()=>{t.setLayout("menuCollapse",!0)}),t.setLayout("menuCollapse",!1)};return(u,d)=>{const r=_("Icon");return i(),S("div",wo,[e(t).layout.shrink&&e(t).layout.menuCollapse?(i(),S("div",xo,[o(r,{onClick:l,name:"fa fa-indent",color:e(t).getColorVal("menuActiveColor"),size:"18"},null,8,["color"])])):I("",!0),e(t).layout.shrink?I("",!0):(i(),x(Qe,{key:1,ref_key:"layoutNavTabsRef",ref:Oe},null,512)),o(ye)])}}}),So=R(To,[["__scopeId","data-v-952ef580"]]),Bo={class:"layouts-menu-horizontal"},Mo={key:0,class:"menu-horizontal-logo"},Vo=A({__name:"menuHorizontal",setup(b){K(c=>({"060392df":e(t).getColorVal("headerBarHoverBackground"),"47fa1928":e(t).getColorVal("menuBackground"),"4f33c052":e(t).getColorVal("menuColor"),"1a744031":e(t).getColorVal("menuActiveColor"),"5354210e":e(t).getColorVal("menuActiveBackground")}));const t=N(),l=P(),u=te(),d=W({defaultActive:""}),r=c=>{d.defaultActive=c.path},y=()=>{G(()=>{var m;let c=document.querySelector(".el-menu.menu-horizontal li.is-active");if(!c)return!1;(m=j.value)==null||m.setScrollTop(c.offsetTop)})};return X(()=>{r(u),y(),new Te(j.value.wrapRef)}),ie(c=>{r(c)}),(c,m)=>{const h=_("el-menu"),w=_("el-scrollbar");return i(),S("div",Bo,[e(t).layout.menuShowTopBar?(i(),S("div",Mo,[o(Ze)])):I("",!0),o(w,{ref_key:"layoutMenuScrollbarRef",ref:j,class:"horizontal-menus-scrollbar"},{default:s(()=>[o(h,{ref_key:"layoutMenuRef",ref:pe,class:"menu-horizontal",mode:"horizontal","default-active":d.defaultActive},{default:s(()=>[o(ve,{extends:{position:"horizontal",level:1},menus:e(l).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["default-active"])]),_:1},512),o(ye)])}}}),$o=R(Vo,[["__scopeId","data-v-e4aec161"]]),Io={class:"layouts-menu-horizontal-double"},Ao=A({__name:"double",setup(b){K(c=>({de392686:e(t).getColorVal("menuBackground"),"3f822322":e(t).getColorVal("menuColor"),22954188:e(t).getColorVal("menuActiveColor"),"0e989e3a":e(t).getColorVal("menuActiveBackground")}));const t=N(),l=P(),u=te(),d=W({defaultActive:""}),r=c=>{$e(c.path,l.state.tabsViewRoutes)&&(d.defaultActive=c.path)},y=()=>{G(()=>{var m;let c=document.querySelector(".el-menu.menu-horizontal li.is-active");if(!c)return!1;(m=j.value)==null||m.setScrollTop(c.offsetTop)})};return X(()=>{r(u),y()}),ie(c=>{r(c)}),(c,m)=>{const h=_("el-menu"),w=_("el-scrollbar");return i(),S("div",Io,[o(w,{ref_key:"layoutMenuScrollbarRef",ref:j,class:"double-menus-scrollbar"},{default:s(()=>[o(h,{ref_key:"layoutMenuRef",ref:pe,class:"menu-horizontal",mode:"horizontal","default-active":d.defaultActive},{default:s(()=>[o(ve,{extends:{position:"horizontal",level:1},menus:e(l).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["default-active"])]),_:1},512),o(ye)])}}}),Ro=R(Ao,[["__scopeId","data-v-dbeaf8af"]]),Fo=A({name:"layout/header",components:{DefaultNavBar:ko,ClassicNavBar:So,StreamlineNavBar:$o,DoubleNavBar:Ro},__name:"header",setup(b){const t=N(),l=P();return(u,d)=>{const r=_("el-header");return e(l).state.tabFullScreen?I("",!0):(i(),x(r,{key:0,class:"layout-header"},{default:s(()=>[(i(),x(Me(e(t).layout.layoutMode+"NavBar")))]),_:1}))}}}),be=R(Fo,[["__scopeId","data-v-9014eea9"]]),zo=A({name:"layout/main",__name:"main",setup(b){const{proxy:t}=Ge(),l=te(),u=N(),d=P(),r=W({componentKey:l.path,keepAliveComponentNameList:[]}),y=function(c){if(c){if(r.keepAliveComponentNameList.find(h=>h===c))return;r.keepAliveComponentNameList.push(c)}};return Je(()=>{t.eventBus.on("onTabViewRefresh",c=>{r.keepAliveComponentNameList=r.keepAliveComponentNameList.filter(m=>c.meta.keepalive!==m),r.componentKey="",G(()=>{r.componentKey=c.path,y(c.meta.keepalive)})}),t.eventBus.on("onTabViewClose",c=>{r.keepAliveComponentNameList=r.keepAliveComponentNameList.filter(m=>c.meta.keepalive!==m)})}),pt(()=>{t.eventBus.off("onTabViewRefresh"),t.eventBus.off("onTabViewClose")}),X(()=>{var c,m;typeof((c=d.state.activeRoute)==null?void 0:c.meta.keepalive)=="string"&&y((m=d.state.activeRoute)==null?void 0:m.meta.keepalive)}),Ye(()=>l.path,()=>{var c,m;r.componentKey=l.path,typeof((c=d.state.activeRoute)==null?void 0:c.meta.keepalive)=="string"&&y((m=d.state.activeRoute)==null?void 0:m.meta.keepalive)}),(c,m)=>{const h=_("router-view"),w=_("el-scrollbar"),v=_("el-main");return i(),x(v,{class:"layout-main"},{default:s(()=>[o(w,{class:"layout-main-scrollbar",style:ne(e(st)),ref_key:"layoutMainScrollbarRef",ref:rt},{default:s(()=>[o(h,null,{default:s(({Component:a})=>[o(Be,{name:e(u).layout.mainAnimation,mode:"out-in"},{default:s(()=>[(i(),x(_t,{include:r.keepAliveComponentNameList},[(i(),x(Me(a),{key:r.componentKey}))],1032,["include"]))]),_:2},1032,["name"])]),_:1})]),_:1},8,["style"])]),_:1})}}}),he=R(zo,[["__scopeId","data-v-ac20f97e"]]),Lo=b=>(je("data-v-0aa634f1"),b=b(),Xe(),b),Do=["title"],Eo=Lo(()=>p("div",{class:"close-full-screen-on"},null,-1)),No=A({__name:"closeFullScreen",setup(b){const t=P(),l=W({closeBoxTop:20});X(()=>{setTimeout(()=>{l.closeBoxTop=-30},300)});const u=()=>{l.closeBoxTop=20},d=()=>{l.closeBoxTop=-30},r=()=>{t.setFullScreen(!1)};return(y,c)=>{const m=_("Icon");return i(),S("div",{title:y.$t("layouts.Exit full screen"),onMouseover:re(u,["stop"]),onMouseout:re(d,["stop"])},[p("div",{onClick:re(r,["stop"]),class:"close-full-screen",style:ne({top:l.closeBoxTop+"px"})},[o(m,{name:"el-icon-Close"})],4),Eo],40,Do)}}}),Ce=R(No,[["__scopeId","data-v-0aa634f1"]]),Po=A({__name:"default",setup(b){const t=P();return(l,u)=>{const d=_("el-container");return i(),S(U,null,[o(d,{class:"layout-container"},{default:s(()=>[o(Ie),o(d,{class:"content-wrapper"},{default:s(()=>[o(be),o(he)]),_:1})]),_:1}),e(t).state.tabFullScreen?(i(),x(Ce,{key:0})):I("",!0)],64)}}}),Uo=R(Po,[["__scopeId","data-v-59d252c1"]]),qo=A({__name:"classic",setup(b){const t=P();return(l,u)=>{const d=_("el-container");return i(),S(U,null,[o(d,{class:"layout-container"},{default:s(()=>[o(Ie),o(d,{class:"content-wrapper"},{default:s(()=>[o(be),o(he)]),_:1})]),_:1}),e(t).state.tabFullScreen?(i(),x(Ce,{key:0})):I("",!0)],64)}}}),Wo=R(qo,[["__scopeId","data-v-fb349671"]]),Oo=A({__name:"streamline",setup(b){const t=P();return(l,u)=>{const d=_("el-container");return i(),S(U,null,[o(d,{class:"layout-container"},{default:s(()=>[o(d,{class:"content-wrapper"},{default:s(()=>[o(be),o(he)]),_:1})]),_:1}),e(t).state.tabFullScreen?(i(),x(Ce,{key:0})):I("",!0)],64)}}}),Ho=R(Oo,[["__scopeId","data-v-fcdc1bd3"]]),Ko=A({__name:"double",setup(b){const t=P();return(l,u)=>{const d=_("el-container");return i(),S(U,null,[o(d,{class:"layout-container"},{default:s(()=>[o(Ie),o(d,{class:"content-wrapper"},{default:s(()=>[o(be),o(he)]),_:1})]),_:1}),e(t).state.tabFullScreen?(i(),x(Ce,{key:0})):I("",!0)],64)}}}),jo=R(Ko,[["__scopeId","data-v-d08319bd"]]),ll=A({components:{Default:Uo,Classic:Wo,Streamline:Ho,Double:jo},__name:"index",setup(b){const t=Se(),l=P(),u=N(),d=te(),r=xe(),y=qe(),c=W({autoMenuCollapseLock:!1});X(()=>{if(!y.token)return We.push({name:"adminLogin"});m(),we(),se(window,"resize",we)}),Je(()=>{h(),se(window,"resize",h)});const m=()=>{xt().then(w=>{if(r.dataFill(w.data.siteConfig),t.changePort(w.data.terminal.installServicePort),t.changePackageManager(w.data.terminal.npmPackageManager),r.setInitialize(!0),De(w.data.adminInfo)||(y.dataFill(w.data.adminInfo),r.setUserInitialize(!0)),w.data.menus){if(ht(w.data.menus),d.params.to){const a=JSON.parse(d.params.to);if(a.path!=Ue){let n=De(a.query)?{}:a.query;fe({path:a.path,query:n});return}}let v=Ve(l.state.tabsViewRoutes);v&&fe(v.path)}})},h=()=>{let w={layoutMode:u.layout.layoutMode,menuCollapse:u.layout.menuCollapse},v=le.get(ue);if(v||le.set(ue,w),document.body.clientWidth<1024)c.autoMenuCollapseLock||(c.autoMenuCollapseLock=!0,u.setLayout("menuCollapse",!0)),u.setLayout("shrink",!0),u.setLayoutMode("Classic");else{c.autoMenuCollapseLock=!1;let n=v||w;u.setLayout("menuCollapse",n.menuCollapse),u.setLayout("shrink",!1),u.setLayoutMode(n.layoutMode)}};return(w,v)=>(i(),x(Me(e(u).layout.layoutMode)))}});export{ll as default};
